# Plant Care 랜딩 페이지 - 최종 완료 (2026-01-18)

## 프로젝트 개요

| 항목 | 내용 |
|------|------|
| **프로젝트명** | Plant Care 랜딩 페이지 |
| **배포 URL** | https://landing01-iota.vercel.app |
| **GitHub** | https://github.com/kjs369369/testlanding |
| **상태** | 최종 완료 |

---

## 완료된 기능 목록

### 1. 사용자 인증 (Firebase)
- [x] Google 로그인/회원가입
- [x] 이메일 로그인/회원가입
- [x] 로그인 상태 유지 (localStorage + Firebase Auth)
- [x] 로그아웃
- [x] 리다이렉트 루프 방지 (`isLoggingIn`, `isSigningUp` 플래그)

### 2. AI 챗봇 (Google Gemini)
- [x] 챗봇 위젯 (우하단 플로팅 버튼)
- [x] Gemini API 키 사용자 입력 기능
- [x] API 키 localStorage 저장
- [x] API 키 유효성 검증
- [x] 대화 기록 유지
- [x] 타이핑 인디케이터

### 3. 결제 시스템 (토스페이먼츠)
- [x] 월간/연간 플랜 선택
- [x] 구매자 정보 입력 폼
- [x] 토스페이먼츠 결제창 연동
- [x] 결제 성공/실패 처리
- [x] Firestore 결제 기록 저장
- [x] 사용자 구독 상태 업데이트

### 4. 리뷰 시스템 (Firebase Firestore)
- [x] 실시간 리뷰 표시
- [x] 평균 별점 계산
- [x] 리뷰 이미지 업로드
- [x] 이미지 전체 표시 (잘림 없음)
- [x] 리뷰 작성/삭제

### 5. 기타 기능
- [x] 뉴스 자동 크롤링 (GitHub Actions, 3시간마다)
- [x] 이메일 수집 (Google Sheets 연동)
- [x] 반응형 디자인
- [x] 관리자 대시보드

---

## API 키 설정 현황

### Firebase (firebase-config.js)
```javascript
// 이미 설정됨 - 공개용 키
apiKey: "AIza..."
authDomain: "plantcare-xxxxx.firebaseapp.com"
projectId: "plantcare-xxxxx"
```

### Google Gemini (챗봇)
- **방식**: 사용자가 직접 입력
- **저장**: localStorage (`plantcare_gemini_api_key`)
- **발급**: https://aistudio.google.com/app/apikey

### 토스페이먼츠 (결제)
```javascript
// checkout.html
클라이언트 키: test_ck_DpexMgkW36vPYNpXNEaE3GbR5ozO

// payment-success.html
시크릿 키: test_sk_P9BRQmyarYPJa5aBqmnWVJ07KzLN
```
- **모드**: 테스트 (실결제 안 됨)
- **실서비스 전환 시**: 라이브 키로 교체 + 시크릿 키는 서버로 이동

---

## 파일 구조

```
landing01/
├── index.html              # 메인 랜딩 페이지
├── login.html              # 로그인
├── signup.html             # 회원가입
├── mypage.html             # 마이페이지
├── checkout.html           # 결제 페이지
├── payment-success.html    # 결제 성공
├── payment-fail.html       # 결제 실패
├── pricing-pro.html        # 프로 플랜 (리뷰 작성)
├── pricing-free.html       # 무료 플랜
├── admin.html              # 관리자 대시보드
├── firebase-config.js      # Firebase 설정
├── news-data.json          # 뉴스 데이터
├── google-apps-script.js   # Google Sheets 스크립트
├── vercel.json             # Vercel 배포 설정
├── logo.png                # 로고 이미지
└── docs/
    ├── 2026-01-17-작업내역.md
    ├── 개발환경-설정-가이드.md
    └── 2026-01-18-최종완료.md
```

---

## 오늘 (2026-01-18) 작업 내역

### 1. 챗봇 Gemini API 키 입력 기능 추가
- 챗봇 헤더에 설정(⚙️) 버튼 추가
- API 키 입력 모달 구현
- API 키 유효성 검증 후 저장
- localStorage에 키 저장으로 브라우저 닫아도 유지
- API 키 없을 시 자동 모달 표시

### 2. 리뷰 이미지 잘림 문제 수정
**변경 전:**
```javascript
class="w-full h-32 object-cover rounded-lg"
```

**변경 후:**
```javascript
class="w-full max-h-48 object-contain"
```
- `object-cover` → `object-contain`: 전체 이미지 표시
- 가로/세로 사진 모두 정상 표시

### 3. 토스페이먼츠 API 키 설정
- 테스트 클라이언트 키 설정 (checkout.html)
- 테스트 시크릿 키 설정 (payment-success.html)
- 결제 테스트 정상 작동 확인

### 4. 문서화
- 개발환경 설정 가이드 작성
- 최종 완료 문서 작성

---

## Firebase 설정 체크리스트

### Authentication
- [x] Google 로그인 활성화
- [x] 이메일/비밀번호 로그인 활성화
- [x] 승인된 도메인에 `landing01-iota.vercel.app` 추가

### Firestore 컬렉션
- `users` - 사용자 정보
- `reviews` - 리뷰 데이터
- `payments` - 결제 기록

### Storage
- 리뷰 이미지 저장용

---

## 배포 방법

```bash
# 1. 변경사항 확인
git status

# 2. 스테이징
git add .

# 3. 커밋
git commit -m "커밋 메시지"

# 4. 푸시 (자동 배포)
git push origin master
```

Vercel이 GitHub와 연동되어 있어 push하면 자동으로 배포됩니다.

---

## 테스트 방법

### 로그인 테스트
1. https://landing01-iota.vercel.app/login.html 접속
2. Google 로그인 또는 이메일 로그인
3. 메인 페이지로 리다이렉트 확인
4. 헤더에 "마이페이지", "로그아웃" 버튼 표시 확인

### 챗봇 테스트
1. 우하단 채팅 버튼 클릭
2. 설정(⚙️) 버튼 클릭
3. Gemini API 키 입력 후 저장
4. 질문 입력하여 응답 확인

### 결제 테스트
1. https://landing01-iota.vercel.app/checkout.html 접속
2. 플랜 선택, 정보 입력, 약관 동의
3. "결제하기" 클릭
4. 토스 테스트 결제창에서 테스트 카드로 결제
5. 결제 성공 페이지 확인

### 리뷰 테스트
1. 로그인 후 https://landing01-iota.vercel.app/pricing-pro.html 접속
2. 하단 리뷰 작성 폼에서 리뷰 작성
3. 이미지 첨부 (가로/세로 사진 모두 테스트)
4. 메인 페이지에서 리뷰 표시 확인

---

## 실서비스 전환 시 필요 작업

### 1. 토스페이먼츠
- [ ] 라이브 API 키 발급
- [ ] 시크릿 키를 서버리스 함수로 이동 (보안)
- [ ] Vercel 환경변수에 키 설정

### 2. Firebase
- [ ] Firestore 보안 규칙 강화
- [ ] 프로덕션용 Firebase 프로젝트 생성 (선택)

### 3. 도메인
- [ ] 커스텀 도메인 연결 (선택)
- [ ] Firebase 승인 도메인 추가

---

## 연락처

- **회사**: AICLab
- **대표**: 김진수
- **연락처**: 010-8921-9536
- **이메일**: info@aiclab2020.com
- **웹사이트**: https://aiclab2020.com

---

## 커밋 히스토리 (최근)

```
19a83ad Add TossPayments test API keys
39b4b1a Fix review images being cropped
4d43453 Add development environment setup guide
2d1f491 Merge branch 'master'
4c43d2c Add Gemini API key input feature to chatbot
429b5a1 Add documentation for 2026-01-17 work
5fdd9ee Fix review average rating display
```

---

**최종 완료일**: 2026-01-18
**버전**: 1.0.0
